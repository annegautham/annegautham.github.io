---
import Layout from "@layouts/Layout.astro";
import type { CollectionEntry } from "astro:content";

// Define types properly here
interface Props {
  ashcroftNotes: CollectionEntry<"notes">[];
  current?: CollectionEntry<"notes">; // optional for index page
  children: any;
}

const { ashcroftNotes, current, children } = Astro.props as Props;
---

<Layout>
  <div class="flex flex-row gap-8">
    <!-- Sidebar -->

    <aside
      class="w-64 shrink-0 sticky top-20 max-h-[90vh] overflow-y-auto px-4 py-6 border-r border-white/10 bg-skin-bg"
    >
      <nav class="space-y-4">
        <div>
          <a
            href="/notes/ashcroft_mermin/"
            class={`text-lg font-semibold tracking-tight block mb-2 transition hover:opacity-80 ${
              current?.slug === "ashcroft_mermin/index" ? "underline" : ""
            }`}
          >
            Ashcroft & Mermin
          </a>
          <ul class="space-y-1 pl-2 border-l border-white/10">
            {
              ashcroftNotes.map(note => {
                const noteSlug = note.slug.split("/").at(-1);
                const isActive = current?.slug === note.slug;
                return (
                  <li>
                    <a
                      href={`/notes/ashcroft_mermin/${noteSlug}`}
                      class={`block text-sm px-3 py-1.5 rounded transition ${
                        isActive
                          ? "bg-skin-accent/20 text-skin-base font-bold border-l-2 border-skin-accent"
                          : "text-skin-base/80 hover:bg-white/5"
                      }`}
                    >
                      {note.data.title}
                    </a>
                  </li>
                );
              })
            }
          </ul>
        </div>
      </nav>
    </aside>

    <!-- Main content area -->
    <main class="flex-1">
      {children}
    </main>
  </div>
</Layout>
